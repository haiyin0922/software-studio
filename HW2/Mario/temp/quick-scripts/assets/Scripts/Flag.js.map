{"version":3,"sources":["Flag.ts"],"names":[],"mappings":";;;;;AAAM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAAkC,wBAAY;IAA9C;;IAsBA,CAAC;IApBG,6BAAc,GAAd,UAAe,OAAO,EAAE,IAAI,EAAE,KAAK;QAC/B,IAAG,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,QAAQ,EAAC;YAC3B,IAAI,IAAI,GAAG,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,oCAAoC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC;YACjG,QAAQ,CAAC,IAAI,EAAE,CAAC,kBAAkB,CAAC,UAAS,IAAI;gBAC5C,IAAI,IAAI,EAAE;oBACN,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;oBAChD,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAC,QAAQ;wBACvD,IAAI,SAAS,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC;wBAC/B,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC;4BACpC,IAAI,EAAE,SAAS,CAAC,IAAI;4BACpB,IAAI,EAAE,SAAS,CAAC,IAAI;4BACpB,KAAK,EAAE,SAAS,CAAC,KAAK,GAAG,IAAI,GAAC,EAAE;yBACnC,CAAC,CAAC;oBACP,CAAC,CAAC,CAAC;iBACN;YACL,CAAC,CAAC,CAAC;YACH,EAAE,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;YACzB,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;SAChC;IACL,CAAC;IArBgB,IAAI;QADxB,OAAO;OACa,IAAI,CAsBxB;IAAD,WAAC;CAtBD,AAsBC,CAtBiC,EAAE,CAAC,SAAS,GAsB7C;kBAtBoB,IAAI","file":"","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["const {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Flag extends cc.Component {\r\n\r\n    onBeginContact(contact, self, other) {\r\n        if(other.node.name == \"player\"){\r\n            var time = parseInt(cc.find(\"Canvas/Main Camera/Board/timer/val\").getComponent(cc.Label).string);\r\n            firebase.auth().onAuthStateChanged(function(user) {\r\n                if (user) {\r\n                    var cleanEmail = user.email.replace(/\\./g, ',');\r\n                    firebase.database().ref(cleanEmail).once('value', (snapshot) => {\r\n                        var childData = snapshot.val();\r\n                        firebase.database().ref(cleanEmail).set({\r\n                            life: childData.life,\r\n                            coin: childData.coin,\r\n                            score: childData.score + time*10\r\n                        });\r\n                    });\r\n                }\r\n            });\r\n            cc.audioEngine.stopAll();\r\n            cc.director.loadScene(\"win\");\r\n        }\r\n    }\r\n}\r\n"]}