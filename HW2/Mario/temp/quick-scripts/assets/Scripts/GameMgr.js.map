{"version":3,"sources":["GameMgr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["import Player from \"./Player\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GameMgr extends cc.Component {\r\n\r\n    @property(Player)\r\n    player: Player = null;\r\n\r\n    private leftDown: boolean = false;\r\n    private rightDown: boolean = false;\r\n    private spaceDown: boolean = false;\r\n\r\n    onLoad () {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n        cc.director.getPhysicsManager().gravity = cc.v2(0, -2000);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n\r\n    update (dt) {\r\n        if(this.player.node.x > 0)\r\n            this.node.x = this.player.node.x;\r\n    }\r\n\r\n    //1右走 2右停 -1左走 -2左停\r\n    onKeyDown(event) {\r\n        switch(event.keyCode)\r\n        {\r\n            case cc.macro.KEY.left:\r\n                this.leftDown = true;\r\n                this.player.playerMove(-1);\r\n                this.player.playerAction(\"walk\");\r\n                break;\r\n            case cc.macro.KEY.right:\r\n                this.rightDown = true;\r\n                this.player.playerMove(1);\r\n                this.player.playerAction(\"walk\");\r\n                break;\r\n            case cc.macro.KEY.space:\r\n                if(!this.spaceDown)\r\n                    this.player.playerAction(\"jump\");\r\n                    this.player.playerJump();\r\n                this.spaceDown = true;\r\n                break;\r\n        }\r\n    }\r\n\r\n    \t\r\n    onKeyUp(event) {\r\n        switch(event.keyCode)\r\n        {\r\n            case cc.macro.KEY.left:\r\n                this.leftDown = false;\r\n                if(this.rightDown){\r\n                    this.player.playerMove(1);\r\n                    this.player.playerAction(\"walk\");\r\n                }\r\n                else{\r\n                    this.player.playerMove(-2);\r\n                    this.player.playerAction(\"idle\");\r\n                }\r\n                break;\r\n            case cc.macro.KEY.right:\r\n                this.rightDown = false;\r\n                if(this.leftDown){\r\n                    this.player.playerMove(-1);\r\n                    this.player.playerAction(\"walk\");\r\n                }\r\n                else{\r\n                    this.player.playerMove(2);\r\n                    this.player.playerAction(\"idle\");\r\n                }\r\n                break;\r\n            case cc.macro.KEY.space:\r\n                this.spaceDown = false;\r\n                if(this.leftDown){\r\n                    this.player.playerMove(-1);\r\n                    this.player.playerAction(\"walk\");\r\n                }\r\n                else if(this.rightDown){\r\n                    this.player.playerMove(1);\r\n                    this.player.playerAction(\"walk\");\r\n                }\r\n                else{\r\n                    this.player.playerMove(0);\r\n                    this.player.playerAction(\"idle\");\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n}\r\n"]}